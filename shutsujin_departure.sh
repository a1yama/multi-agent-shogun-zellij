#!/bin/bash
# ðŸ¯ multi-agent-shogun å‡ºé™£ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆZellijç‰ˆ - Macç”¨ï¼‰
# å…¨è‡ªå‹•ã§10ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’èµ·å‹•
#
# ä½¿ç”¨æ–¹æ³•:
#   ./shutsujin_departure.sh           # å…¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹•ï¼ˆé€šå¸¸ï¼‰
#   ./shutsujin_departure.sh -s        # ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã®ã¿ï¼ˆClaudeèµ·å‹•ãªã—ï¼‰
#   ./shutsujin_departure.sh -h        # ãƒ˜ãƒ«ãƒ—è¡¨ç¤º
#
# åˆå›žã¯ ./first_setup.sh ã§ãƒ—ãƒ©ã‚°ã‚¤ãƒ³æ¨©é™ã‚’ä»˜ä¸Žã—ã¦ãã ã•ã„

set -e

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
cd "$SCRIPT_DIR"

# è‰²ä»˜ããƒ­ã‚°é–¢æ•°
log_info() { echo -e "\033[1;33mã€å ±ã€‘\033[0m $1"; }
log_success() { echo -e "\033[1;32mã€æˆã€‘\033[0m $1"; }
log_war() { echo -e "\033[1;31mã€æˆ¦ã€‘\033[0m $1"; }
log_error() { echo -e "\033[1;31mã€èª¤ã€‘\033[0m $1"; }

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ã‚ªãƒ—ã‚·ãƒ§ãƒ³è§£æž
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SETUP_ONLY=false

while [[ $# -gt 0 ]]; do
    case $1 in
        -s|--setup-only)
            SETUP_ONLY=true
            shift
            ;;
        -h|--help)
            echo ""
            echo "ðŸ¯ multi-agent-shogun å‡ºé™£ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆZellijç‰ˆï¼‰"
            echo ""
            echo "ä½¿ç”¨æ–¹æ³•: ./shutsujin_departure.sh [ã‚ªãƒ—ã‚·ãƒ§ãƒ³]"
            echo ""
            echo "ã‚ªãƒ—ã‚·ãƒ§ãƒ³:"
            echo "  -s, --setup-only  ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã®ã¿ï¼ˆClaudeèµ·å‹•ãªã—ï¼‰"
            echo "  -h, --help        ã“ã®ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤º"
            echo ""
            echo "åˆå›žã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—:"
            echo "  ./first_setup.sh  # ãƒ—ãƒ©ã‚°ã‚¤ãƒ³æ¨©é™ä»˜ä¸Žï¼ˆåˆå›žã®ã¿ï¼‰"
            echo ""
            exit 0
            ;;
        *)
            echo "ä¸æ˜Žãªã‚ªãƒ—ã‚·ãƒ§ãƒ³: $1"
            exit 1
            ;;
    esac
done

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# å‰ææ¡ä»¶ãƒã‚§ãƒƒã‚¯
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
check_prerequisites() {
    local missing=false

    if ! command -v jq &> /dev/null; then
        log_error "jq ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã¾ã›ã‚“: brew install jq"
        missing=true
    fi

    if ! command -v zellij &> /dev/null; then
        log_error "zellij ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã¾ã›ã‚“: brew install zellij"
        missing=true
    fi

    PLUGIN_PATH="$HOME/.config/zellij/plugins/zellij-send-keys.wasm"
    if [ ! -f "$PLUGIN_PATH" ]; then
        log_error "ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã¾ã›ã‚“"
        echo "  ./first_setup.sh ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„"
        missing=true
    fi

    if [ "$missing" = true ]; then
        exit 1
    fi
}

check_prerequisites

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# å‡ºé™£ãƒãƒŠãƒ¼è¡¨ç¤º
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
clear
echo ""
echo -e "\033[1;31mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\033[0m"
echo -e "\033[1;31mâ•‘\033[0m \033[1;33mâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—     â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—\033[0m \033[1;31mâ•‘\033[0m"
echo -e "\033[1;31mâ•‘\033[0m \033[1;33mâ–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘\033[0m \033[1;31mâ•‘\033[0m"
echo -e "\033[1;31mâ•‘\033[0m \033[1;33mâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘\033[0m \033[1;31mâ•‘\033[0m"
echo -e "\033[1;31mâ•‘\033[0m \033[1;33mâ•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆ   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘\033[0m \033[1;31mâ•‘\033[0m"
echo -e "\033[1;31mâ•‘\033[0m \033[1;33mâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘\033[0m \033[1;31mâ•‘\033[0m"
echo -e "\033[1;31mâ•‘\033[0m \033[1;33mâ•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â• â•šâ•â•â•â•â•â•    â•šâ•â•   â•šâ•â•â•â•â•â•â• â•šâ•â•â•â•â•â•  â•šâ•â•â•â•â• â•šâ•â•â•šâ•â•  â•šâ•â•â•â•\033[0m \033[1;31mâ•‘\033[0m"
echo -e "\033[1;31mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£\033[0m"
echo -e "\033[1;31mâ•‘\033[0m       \033[1;37må‡ºé™£ã˜ã‚ƒãƒ¼ãƒ¼ãƒ¼ï¼ï¼ï¼\033[0m    \033[1;36mâš”\033[0m    \033[1;35må¤©ä¸‹å¸ƒæ­¦ï¼\033[0m                          \033[1;31mâ•‘\033[0m"
echo -e "\033[1;31mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\033[0m"
echo ""

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# æ—¢å­˜ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
log_info "ðŸ§¹ æ—¢å­˜ã®é™£ã‚’æ’¤åŽä¸­..."
zellij delete-session shogun --force 2>/dev/null || true
log_success "âœ… é™£æ‰•ã„å®Œäº†"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ã‚­ãƒ¥ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚»ãƒƒãƒˆ
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
log_info "ðŸ“œ è»è­°è¨˜éŒ²ã‚’åˆæœŸåŒ–ä¸­..."
for i in {1..8}; do
    cat > ./queue/reports/ashigaru${i}_report.yaml << EOF
worker_id: ashigaru${i}
task_id: null
timestamp: ""
status: idle
result: null
EOF
    cat > ./queue/tasks/ashigaru${i}.yaml << EOF
task: null
EOF
done

cat > ./queue/shogun_to_karo.yaml << 'EOF'
queue: []
EOF

log_success "âœ… åˆæœŸåŒ–å®Œäº†"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰åˆæœŸåŒ–
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
log_info "ðŸ“Š æˆ¦æ³å ±å‘Šæ¿ã‚’åˆæœŸåŒ–ä¸­..."
TIMESTAMP=$(date "+%Y-%m-%d %H:%M")
cat > ./dashboard.md << EOF
# ðŸ“Š æˆ¦æ³å ±å‘Š
æœ€çµ‚æ›´æ–°: ${TIMESTAMP}

## ðŸš¨ è¦å¯¾å¿œ - æ®¿ã®ã”åˆ¤æ–­ã‚’ãŠå¾…ã¡ã—ã¦ãŠã‚Šã¾ã™
ãªã—

## ðŸ”„ é€²è¡Œä¸­ - åªä»Šã€æˆ¦é—˜ä¸­ã§ã”ã–ã‚‹
ãªã—

## âœ… æœ¬æ—¥ã®æˆ¦æžœ
| æ™‚åˆ» | æˆ¦å ´ | ä»»å‹™ | çµæžœ |
|------|------|------|------|

## ðŸŽ¯ ã‚¹ã‚­ãƒ«åŒ–å€™è£œ - æ‰¿èªå¾…ã¡
ãªã—

## â¸ï¸ å¾…æ©Ÿä¸­
ãªã—
EOF
log_success "âœ… æˆ¦æ³å ±å‘Šæ¿æº–å‚™å®Œäº†"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆ
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
log_war "âš”ï¸ é™£å½¢ã‚’æ§‹ç¯‰ä¸­..."

# ã‚³ãƒžãƒ³ãƒ‰å®šç¾©
HELPER="source ${SCRIPT_DIR}/scripts/send-keys.sh"

# åˆæœŸæŒ‡ç¤º
SHOGUN_PROMPT="instructions/shogun.md ã‚’èª­ã‚“ã§å½¹å‰²ã‚’ç†è§£ã›ã‚ˆ"
KARO_PROMPT="instructions/karo.md ã‚’èª­ã‚“ã§å½¹å‰²ã‚’ç†è§£ã›ã‚ˆ"

# å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®èµ·å‹•ã‚³ãƒžãƒ³ãƒ‰
SHOGUN_START="${HELPER} && MAX_THINKING_TOKENS=0 claude --model opus --dangerously-skip-permissions '${SHOGUN_PROMPT}'"
KARO_START="${HELPER} && claude --dangerously-skip-permissions '${KARO_PROMPT}'"

# è¶³è»½ç”¨ã®èµ·å‹•ã‚³ãƒžãƒ³ãƒ‰ç”Ÿæˆé–¢æ•°
ashigaru_cmd() {
    local n=\$1
    echo "${HELPER} && claude --dangerously-skip-permissions 'instructions/ashigaru.md ã‚’èª­ã‚“ã§å½¹å‰²ã‚’ç†è§£ã›ã‚ˆã€‚æ±ã¯è¶³è»½${n}å·ã§ã‚ã‚‹'"
}

if [ "$SETUP_ONLY" = true ]; then
    SHOGUN_START="${HELPER}"
    KARO_START="${HELPER}"
fi

# çµ±åˆã‚»ãƒƒã‚·ãƒ§ãƒ³ç”¨ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆ10ãƒšã‚¤ãƒ³: shogun + karo + ashigaru1-8ï¼‰
if [ "$SETUP_ONLY" = true ]; then
cat > /tmp/shogun_layout.kdl << 'LAYOUT_EOF'
layout {
    pane split_direction="horizontal" {
        pane split_direction="vertical" size="20%" {
            pane name="shogun"
            pane name="karo"
        }
        pane split_direction="vertical" size="20%" {
            pane name="ashigaru1"
            pane name="ashigaru2"
        }
        pane split_direction="vertical" size="20%" {
            pane name="ashigaru3"
            pane name="ashigaru4"
        }
        pane split_direction="vertical" size="20%" {
            pane name="ashigaru5"
            pane name="ashigaru6"
        }
        pane split_direction="vertical" size="20%" {
            pane name="ashigaru7"
            pane name="ashigaru8"
        }
    }
}
LAYOUT_EOF
else
cat > /tmp/shogun_layout.kdl << LAYOUT_EOF
layout {
    pane split_direction="horizontal" {
        pane split_direction="vertical" size="20%" {
            pane name="shogun" command="zsh" {
                args "-i" "-c" "${HELPER} && MAX_THINKING_TOKENS=0 claude --model opus --dangerously-skip-permissions '${SHOGUN_PROMPT}'; exec zsh"
            }
            pane name="karo" command="zsh" {
                args "-i" "-c" "${HELPER} && claude --dangerously-skip-permissions '${KARO_PROMPT}'; exec zsh"
            }
        }
        pane split_direction="vertical" size="20%" {
            pane name="ashigaru1" command="zsh" {
                args "-i" "-c" "${HELPER} && claude --dangerously-skip-permissions 'instructions/ashigaru.md ã‚’èª­ã‚“ã§å½¹å‰²ã‚’ç†è§£ã›ã‚ˆã€‚æ±ã¯è¶³è»½1å·ã§ã‚ã‚‹'; exec zsh"
            }
            pane name="ashigaru2" command="zsh" {
                args "-i" "-c" "${HELPER} && claude --dangerously-skip-permissions 'instructions/ashigaru.md ã‚’èª­ã‚“ã§å½¹å‰²ã‚’ç†è§£ã›ã‚ˆã€‚æ±ã¯è¶³è»½2å·ã§ã‚ã‚‹'; exec zsh"
            }
        }
        pane split_direction="vertical" size="20%" {
            pane name="ashigaru3" command="zsh" {
                args "-i" "-c" "${HELPER} && claude --dangerously-skip-permissions 'instructions/ashigaru.md ã‚’èª­ã‚“ã§å½¹å‰²ã‚’ç†è§£ã›ã‚ˆã€‚æ±ã¯è¶³è»½3å·ã§ã‚ã‚‹'; exec zsh"
            }
            pane name="ashigaru4" command="zsh" {
                args "-i" "-c" "${HELPER} && claude --dangerously-skip-permissions 'instructions/ashigaru.md ã‚’èª­ã‚“ã§å½¹å‰²ã‚’ç†è§£ã›ã‚ˆã€‚æ±ã¯è¶³è»½4å·ã§ã‚ã‚‹'; exec zsh"
            }
        }
        pane split_direction="vertical" size="20%" {
            pane name="ashigaru5" command="zsh" {
                args "-i" "-c" "${HELPER} && claude --dangerously-skip-permissions 'instructions/ashigaru.md ã‚’èª­ã‚“ã§å½¹å‰²ã‚’ç†è§£ã›ã‚ˆã€‚æ±ã¯è¶³è»½5å·ã§ã‚ã‚‹'; exec zsh"
            }
            pane name="ashigaru6" command="zsh" {
                args "-i" "-c" "${HELPER} && claude --dangerously-skip-permissions 'instructions/ashigaru.md ã‚’èª­ã‚“ã§å½¹å‰²ã‚’ç†è§£ã›ã‚ˆã€‚æ±ã¯è¶³è»½6å·ã§ã‚ã‚‹'; exec zsh"
            }
        }
        pane split_direction="vertical" size="20%" {
            pane name="ashigaru7" command="zsh" {
                args "-i" "-c" "${HELPER} && claude --dangerously-skip-permissions 'instructions/ashigaru.md ã‚’èª­ã‚“ã§å½¹å‰²ã‚’ç†è§£ã›ã‚ˆã€‚æ±ã¯è¶³è»½7å·ã§ã‚ã‚‹'; exec zsh"
            }
            pane name="ashigaru8" command="zsh" {
                args "-i" "-c" "${HELPER} && claude --dangerously-skip-permissions 'instructions/ashigaru.md ã‚’èª­ã‚“ã§å½¹å‰²ã‚’ç†è§£ã›ã‚ˆã€‚æ±ã¯è¶³è»½8å·ã§ã‚ã‚‹'; exec zsh"
            }
        }
    }
}
LAYOUT_EOF
fi

log_success "âœ… é™£å½¢æ§‹ç¯‰å®Œäº†"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ã‚»ãƒƒã‚·ãƒ§ãƒ³èµ·å‹•
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
log_war "ðŸ‘‘ å…¨è»ã‚’å¬å–šä¸­..."

echo ""
echo "  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "  â•‘  ðŸ¯ å‡ºé™£ï¼å¤©ä¸‹å¸ƒæ­¦ï¼                                      â•‘"
echo "  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "  ãƒšã‚¤ãƒ³IDå¯¾å¿œè¡¨:"
echo "  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”"
echo "  â”‚ 0:å°†è»  â”‚ 2:è¶³è»½1 â”‚ 4:è¶³è»½3 â”‚ 6:è¶³è»½5 â”‚ 8:è¶³è»½7 â”‚"
echo "  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤"
echo "  â”‚ 1:å®¶è€  â”‚ 3:è¶³è»½2 â”‚ 5:è¶³è»½4 â”‚ 7:è¶³è»½6 â”‚ 9:è¶³è»½8 â”‚"
echo "  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
echo ""

if [ "$SETUP_ONLY" = false ]; then
    echo "  Claude Code ãŒå„ãƒšã‚¤ãƒ³ã§èµ·å‹•ã—ã€è‡ªå‹•çš„ã«æŒ‡ç¤ºæ›¸ã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚"
fi

echo ""
echo "  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "   ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«æŽ¥ç¶šä¸­..."
echo "  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

sleep 1

# ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’èµ·å‹•ã—ã¦ã‚¢ã‚¿ãƒƒãƒ
exec zellij -s shogun -n /tmp/shogun_layout.kdl
